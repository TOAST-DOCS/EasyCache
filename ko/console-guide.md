## Database > EasyCache > 콘솔 사용 가이드

## 시작하기

* 복제 그룹을 생성합니다.
* **Console > Database > EasyCache**의 **복제 그룹**탭에서 **생성** 버튼을 누르면 복제 그룹 생성 창이 나타납니다.

![rep_001.PNG](https://static.toastoven.net/prod_easycache/19.11.08/rep_create_001.PNG)

* 설정 창에서 표시된 필수 항목을 모두 입력하고 하단의 생성 버튼을 눌러주세요.
    * 복제그룹 이름: 복제 그룹 이름을 입력합니다.
    * 설명: 복제 그룹의 설명을 입력합니다.
    * 서비스 포트: Redis의 Port 번호를 입력합니다.
        * 10000 ~ 12000 사이로 설정할 수 있습니다.
    * 버젼: 생성하고자 하는 Redis 버젼을 선택합니다.
        * 현재 3.2.12만 지원합니다.
    * 인스턴스 타입: 복제 그룹의 사양을 선택합니다.
    * Max Memory : Max Memory를 조정하여 동기화나 백업 실행시 메모리 부족을 예방 할 수 있습니다.
        * Redis 서버에 사용할 최대 메모리의 용량을 변경할 수 있습니다.
        * 최대 메모리를 용량을 유동성있게 변경 가능하게 함으로써 필요따라 관리용 메모리의 용량도 유연성있게 확보할 수 있습니다.
    * 가용성 영역: 복제 그룹이 생성될 영역을 선택합니다.  
    * 설정 프로파일: Redis의 설정 파일을 선택합니다.
        * Default 프로파일를 제공합니다.
        * 설정 프로파일을 추가하여 선택할 수 있습니다.
    * VPC Subnet : 생성할 복제 그룹과 private network 통신을 원하는 Compute & Network 상품의 subnet 을 선택합니다.
    * 자동 백업 설정 : 자동 백업 사용 여부를 선택합니다.
        * 백업 보관 기간: 1일부터 최대 30일까지 보관이 가능합니다.
        * 백업 시작 시간: 백업 시작 시각을 지정합니다. 30분 단위로 지정이 가능합니다.
        * 백업 소요 시간: 백업 시작 시각부터 지정한 시간 사이의 임의의 시점에 시작합니다. 1시간부터 최대 3시간까지 지정이 가능합니다.
    * 입력하고 **생성** 버튼을 누릅니다.
    * 확인 화면에서 입력한 내용을 확인합니다.  
    * 최종적으로 **생성** 버튼을 누릅니다.
    * 복제 그룹이 생성되면서 Master 노드가 생성됩니다. 
    * 생성되기 까지 수분이 소요 됩니다.

### 복제그룹 접속

* 생성된 복제 그룹을 선택하고 **접속 정보**탭을 누릅니다.

![rep_de_002.PNG](https://static.toastoven.net/prod_easycache/19.11.08/rep_connection_001.PNG)

* 암호화된 패스워드를 **보기** 버튼을 누르면 확인할 수 있습니다.
* **복사**버튼을 누르면 패스워드를 복사할 수 있습니다.
* 접속 가능한 도메인 정보를 확인할 수 있습니다.
* Floating IP 를 연결하지 않은 Redis 노드는 외부에서 접근할 수 없습니다.
* 플로팅IP 연결을 할 경우에는 public 도메인이 발행됩니다.
* **복사**버튼을 누르면 도메인를 복사할 수 있습니다.
* 접속 정보는 같은 VPC Subnet로 연결된 노드의 애플리케이션에서 사용할 수 있습니다.
* 커맨드는 같은 VPC Subnet로 연결된 노드에서 실행 가능합니다.
* 접속 제어 정보: 복제 그룹에 접근 가능한 사용자를 CIDR 형식으로 입력합니다.
    * **내 IP 표시** : 로컬 IP가 CIDR 형식으로 표시됩니다.
    * **생성** 버튼 누르면 등록됩니다.
    * 접속 제어 정보에 등록되지 않은 IP 는 접속이 불가능합니다.


## 복제 그룹

### 복제

* 가용성을 높이기 위해서 Redis가 지원하는 Replica 노드를 만들 수 있습니다.
* Replica 노드를 만들기 위해서 원본 복제 그룹을 선택한 후 **노드 추가** 버튼을 누릅니다.

![nod_ad_001.PNG](https://static.toastoven.net/prod_easycache/19.11.08/rep_node_add_001.PNG)

* Replica 노드가 생성될 가용성 영역을 선택합니다. 원본 Master 노드와 다른 가용성 영역을 선택하면 가용성이 좋습니다. 
* Master 노드의 정보를 확인할 수 있습니다.
* OK 버튼을 누르면, Replica 노드가 생성됩니다.
* 노드정보는 그룹 상세에서 확인할 수 있습니다.
* 생성하면서 자동으로 복제 관계와 고가용성 설정이 됩니다.
* 원본 Master 노드와 동일한 사양입니다.
* 원본 Master 노드의 크기에 비례하여 Replica 노드 생성 시간이 늘어 날 수 있습니다.

##### 제약 사항
* 원본 Master 노드는 1개의 Replica 노드만 만들 수 있습니다.
* Replica 노드의 Replica 노드를 만들 수 없습니다.

### 복제 그룹 상세
![rep_detail_001.PNG](https://static.toastoven.net/prod_easycache/19.11.08/rep_detail_001.PNG)
* 복제 그룹의 상세 정보를 확인할 수 있습니다.
    * 기본 정보
    * 접속 정보
    * 노드 정보
    * 모니터링
   
* 생성된 복제 그룹의 개수를 확인할 수 있습니다.
* [새로 고침]을 복제 그룹의 일람을 최신 정보로 갱신할 수 있습니다.

### 고가용성(HA)
* standalone의 Master 노드에 Replica 노드를 추가하면 자동으로 고가용성의 기능이 설정됩니다.
* Master 노드를 감시하여 장애가 발생했을 때 자동적으로 장애 조치를 함으로써 downtime을 최대한 단축할 수 있습니다.
* 장애 조치는 장애가 발생한 Master 노드를 감지하여 자동으로 Replica 노드를 Master 노드로 승격(failover)시키는 처리를 말합니다.
* Master, Replica 노드의 장애및 상태에 관련한 이벤트를 확인 할 수 있습니다.
* 기존 Master 노드에 백업 설정이 있는 경우에는 변경된 새 Master 노드는 기존 Master 노드의 백업을 승계합니다.

##### 제약사항

* 장애가 발생하여 장애 조치한 경우, 장애가 발생한 기존 Master 노드는 중지됩니다. 장애가 난 노드를 삭제하면 고가용성 기능을 사용하지 않는 일반 standalone의 Master 노드로 변경됩니다.
* 또한 standalone이 된 Master 노드에 Replica 노드를 추가하면 고가용성 기능을 다시 새롭게 지정해 사용할 수 있습니다.
* 변경된 새 Master 노드는 기존 Master 노드의 접속에 사용되는 도메인을 승계합니다.
* 장애 조치를 수행한 기존의 Master 노드는 ‘이용불가’ 상태로 되고, 이용불가 상태에서 새 master 노드로만 고가용성 기능이 제공되지 않습니다.
* 장애 조치를 수행한 기존의 Master 노드는 노드 재시작 기능을 이용해 재구동을 하면 자동으로 Replica 노드로 변환되면서 고가용성 기능을 다시 사용할 수 있습니다. 단 장애로 인한 데이터 손실 등의 이유로 다시 구동할 수 없거나 정상적으로 작동하지 않을 수 있습니다.

### 복제 그룹 수정
* 원본 복제 그룹을 선택하고 **수정** 버튼을 누릅니다.
    * 복제그룹 이름: 복제 그룹 이름을 변경할 수 있습니다.
    * 설명: 복제 그룹 설명을 변경할 수 있습니다.
    * 설정 프로파일: Redis 설정을 변경할 수 있습니다.
    * Max Memory : 사용할 최대 메모리의 용량을 변경할 수 있습니다.
    * 자동 백업 설정 : 자동 백업 사용 여부를 선택합니다.
        * 백업 보관 기간 : 1일부터 최대 30일까지 보관이 가능합니다.
        * 백업 시작 시간 : 백업 시작 시각을 지정합니다. 30분 단위로 지정이 가능합니다.
        * 백업 소요 시간 : 백업 시작 시각부터 지정한 시간 사이의 임의의 시점에 시작합니다. 1시간부터 최대 3시간까지 지정이 가능합니다.

![rep_mo_001.PNG](https://static.toastoven.net/prod_easycache/19.11.08/rep_modify_001.PNG)

* 변경 내용을 확인하고 **변경** 버튼을 누릅니다.
* 한번 설정한 서비스 포트, Redis 버전, 인스턴스 타입, 가용성 영역은 변경할 수 없습니다.

### 모니터링

* EasyCache는 Redis 운영 및 사용에 필요한 모니터링 항목을 주기적으로 수집하고, 차트로 보여줍니다.
* 특정 복제 그룹의 모니터링 항목이 보고 싶을 경우, 복제 그룹 목록에서 특정 복제 그룹을 선택하고 Monitoring 탭을 선택합니다.

![monitoring_001.png](https://static.toastoven.net/prod_easycache/19.11.08/monitoring_001.PNG)

* 차트 종류는 평균값을 지원합니다.
* 1시간, 24시간 등의 버튼을 누를 때마다, 현재 시각을 기준으로 계산하여 갱신합니다.
    * 1시간 버튼은 1분마다 정보를 수집한 차트를 표시합니다. 
    * 24시간 버튼은 1시간 정보를 수집한 차트를 표시합니다. 
    * 1주일 버튼은 24시간 정보를 수집한 차트를 표시합니다. 
    * 1개월 버튼은 1주일 정보를 수집한 차트를 표시합니다. 
* 지정 버튼을 눌러서 직접 검색기간을 지정할 수 있습니다.
* 모니터링 데이타 보존 기간은 1개월입니다.
* 모니터링 항목
    * CPU 이용률
    * 시스템 메모리
    * 연결된 클라이언트
    * 블록된 클라이언트
    * Redis 메모리 사용량
    * Redis 메모리 사용량(rss)
    * 메모리 파편화 비율
    * 초당 처리한 명령수
    * 입력 바이트
    * 출력바이트
    * 삭제된 키 수(expired)
    * 삭제된 키 수(evicted)
    * 조회 성공 수
    * 조회 실패 수
    * 조회 성공률
    * 키 갯수
    * get 실행 횟수
    * get usec/get calls
    * set 실행 횟수
    * set usec/get calls
* 모니터링 항목은 필터조건에서 원하는 항목만을 표시하도록 선택할 수 있습니다.
      
## 백업

* EasyCache > **백업** 탭을 선택합니다.
* 수동으로 백업 파일을 삭제할 수 있습니다.
* 멀티 삭제가 가능합니다.
* EasyCache에서는 Max Memory와 동일한 크기의 백업 볼륨을 제공합니다.
* 백업 볼륨과 저장된 백업은 용량에 따라 별도 과금됩니다.
* 백업이 실행되는 동안에는 백업으로 인한 성능 저하가 발생할 수 있습니다.
* 서비스에 영향을 주지 않기 위해서, 서비스의 부하가 적은 시간에 백업을 하는 것이 유리합니다.
* 검색어 란에 단어를 입력하고 검색할 때 백업 이름 또는 복제 그룹 이름을 대상으로 검색한 결과를 표시합니다.
* 새로 고침을 이용하여 실시간으로 백업 파일을 확인할 수 있습니다.

### 자동 백업

![backup_001.PNG](https://static.toastoven.net/prod_easycache/19.08.02/backup_001.PNG)

* 지정된 시간에 자동적으로 RDB 파일을 백업합니다.
* 백업 대상이 된 복제 그룹이 삭제되면 백업 파일도 삭제됩니다.
* 백업 보관이 지나면 자동으로 백업 파일이 삭제됩니다.
* 자동 백업은 백업 시작 시각부터 백업 소요 시간 사이 중 임의의 시점에 시작됩니다.
![backup_002.PNG](https://static.toastoven.net/prod_easycache/19.08.02/backup_002.PNG)
* 기본 정보에서 백업 파일 상세 내용과 복제 그룹의 상세 내용을 확인할 수 있습니다.
* 백업
    * 백업 이름
    * 복제 그룹 이름
    * 백업 타입
    * 백업 시작 일자
    * 백업 보관 기간
    * 백업 최종 보관일
    * 캐쉬 사이즈 (복제 그룹에서 사용된 메모리 사이즈)
    * 상태
* 복제 그룹
    * 복제 그룹 이름
    * 인스턴스 타입
    * 버젼
    * Max Memory
    * 서비스 포트
    * 설정 프로파일
    * VPC Subnet

### 수동 백업
* 선택한 복제 그룹의 백업을 즉시 생성합니다. 
* 백업 대상이 된 복제 그룹이 삭제되더라도 백업 파일은 남아있습니다. 
* 생성된 수동 백업은 **백업**탭에서 관리할 수 있습니다. 
* 백업 볼륨과 저장된 백업은 용량에 따라 별도 과금됩니다.
* 백업이 실행되는 동안에는 백업으로 인한 성능 저하가 발생할 수 있습니다.
* 백업 대상인 복제 그룹이 삭제되었다면 기본 정보에서 복제 그룹의 상세 내용은 표시되지 않습니다. 

![manual_backup_001.png](https://static.toastoven.net/prod_easycache/19.11.08/manual_backup_001.PNG)

* 수동 백업 파일을 만들기 위해서 대상 복제 그룹을 선택한 후 **수동 백업** 버튼을 누릅니다.
    * 백업 이름: 백업 이름을 입력합니다.
    * 설명: 백업 설명을 입력합니다.
    * 백업 보관 기간 : 삭제하지 않거나 1일부터 최대 30일까지 보관이 가능합니다.

* OK 버튼을 누르면, 수동 백업이 생성됩니다.
* 데이터 크기에 비례하여 백업 생성 시간이 늘어 날 수 있습니다.

##### 제약 사항
* 수동 백업을 생성중에 중복으로 수동 백업을 할 수 없습니다. 진행중인 수동 백업이 끝난 뒤 다시 시도해 주세요. 

### 복원

* 보관된 백업을 이용하여 원하는 시점으로 노드를 복원할 수 있습니다.
* 복원 시, 원본 노드를 변경하지 않고 새로운 같은 사양의 노드를 생성합니다.
* 복원 시, 원본 노드를 변경하지 않고 새로운 다른 사양의 노드를 생성합니다.

![restore_001.PNG](https://static.toastoven.net/prod_easycache/19.11.08/restore_001.PNG)

* 복원 내용
    * 백업 이름: 복원을 하고자 하는 백업 파일 이름
    * 복제 그룹 이름: 복제 그룹 이름을 입력합니다.
    * 설명: 복제 그룹의 설명을 입력합니다.
    * 서비스 포트: 백업 대상이 된 복제 그룹의 포트가 표시됩니다.
        * Redis의 Port 번호를 변경할 수 있습니다.
        * 10000 ~ 12000 사이로 설정할 수 있습니다.
    * 버전: 백업 대상이 된 복제 그룹의 Redis 버전이 표시됩니다.
        * 현재 3.2.12만 지원합니다.
    * 인스턴스 타입: 백업 대상이 된 복제 그룹의 사양이 표시됩니다.
        * 백업의 캐시 사이즈보다 큰 인스턴트 타입만 표시됩니다.
        * 인스턴트 타입을 변경할 수 있습니다.
    * Max Memory : Max Memory를 조정하여 동기화나 백업 실행시 메모리 부족을 예방 할 수 있습니다.
        * Redis 서버에 사용할 최대 메모리의 용량을 변경할 수 있습니다.
        * 최대 메모리를 용량을 유동성있게 변경 가능하게 함으로써 필요따라 관리용 메모리의 용량도 유연성있게 확보할 수 있습니다.
    * 가용성 영역: 복제 그룹이 생성될 영역을 선택합니다.
    * 설정 프로파일: 백업 대상이 된 복제 그룹의 Redis의 설정 파일이 표시됩니다.
        * 설정 프로파일을 추가하여 변경할 수 있습니다.
    * VPC Subnet : 백업 대상이 된 복제 그룹의 VPC Subnet가 표시됩니다.
        * 생성할 복제 그룹과 private network 통신을 원하는 Compute & Network 상품의 subnet 을 선택할 수 있습니다.
    * 자동 백업 설정 : 자동 백업 사용 여부를 선택합니다.
        * 백업 보관 기간 : 1일부터 최대 30일까지 보관이 가능합니다.
        * 백업 시작 시간 : 백업 시작 시각을 지정합니다. 30분 단위로 지정이 가능합니다.
        * 백업 지연 시간 : 백업 시작 시각부터 지정한 시간 사이의 임의의 시점에 시작합니다. 3시간까지 지정이 가능합니다.
    * 입력하고 **생성** 버튼을 누릅니다.
* 생성된 복제 그룹은 복제 그룹 탭에서 확인할 수 있습니다.

## 이벤트

* EasyCache > **이벤트** 탭을 선택합니다.
* EasyCache는 복제 그룹에서 발생한 의미 있는 이벤트를 자동으로 남깁니다.
* 검색어 란에 단어를 입력하고 검색할 때 이벤트의 리소스 이름과 설명을 대상으로 검색한 결과를 표시합니다.

![eve_002.PNG](https://static.toastoven.net/prod_easycache/19.11.08/event_001.PNG)

* 시간, 날짜별로 검색할 수 있습니다.
* 이벤트 데이타 보존 기간은 1개월입니다.
* 이벤트 타입은 어떤 리소스에서 발생한 이벤트인지를 지칭합니다.
    * ALL: NODE와 REPLICATION_GROUP 관련된 이벤트입니다.
    * NODE: NODE에 관련된 이벤트입니다.
    * REPLICATION_GROUP: REPLICATION_GROUP에 관련된 이벤트입니다.
    * FROFILE: FROFILE에 관련된 이벤트입니다. 
* 이벤트 항목
    * 플로팅IP 
    * 복제 그룹 
    * 인스턴스 
    * 노드
    * 프로파일 
    * 레플리케이션
    * 캐시 인스턴스
    * HA
* 이벤트 항목의 상태
    * 시작
    * 종료
    * 성공
    * 실패
    * 연결 됨
    * 연결 끊어짐 
    * 복구
    * 장해
## 알람

* EasyCache는 원하는 리소스에서 발생하는 특정 이벤트에 대한 알림을 수신그룹에 전달할 수 있습니다.

![eve_001.PNG](https://static.toastoven.net/prod_easycache/19.08.02/noti_001.PNG)

* 원하는 알림을 설정하기 위하여 알림 탭을 선택한 후, 생성 버튼을 누릅니다.
* 원하는 알림의 이름을 입력하고, 알림 설정을 통해 설정하고자하는 타입을 선택합니다.
    * 설정 후 OK 버튼을 클릭합니다.
* 일시적으로 알림 기능을 On / Off 할 수 있습니다.

![not_re_001.PNG](https://static.toastoven.net/prod_easycache/19.08.02/noti_002.PNG)

* 알림을 받을 수신자를 설정합니다.
    * 메일과 전화번호를 설정할 수 있습니다
* 알림을 받을 이벤트를 설정합니다
    * 원하는 이벤트를 복수 선택하여 설정합니다.
* 알림을 받을 모니터의 임계값을 설정합니다
    *  모니터링 화면에서 확인할 수 있는 항목들 중에서 입력할 수 있습니다.
* 설정한 조건을 만족 시 수신 대상에 입력한 메일주소와 전화번호로 알림을 받을 수 있습니다.  

## 설정 프로파일

* EasyCache는 변경이 가능한 Redis의 설정을 프로파일 형태로 등록하여 관리할 수 있습니다.
* 변경이 가능한 Redis의 설정을 프로파일로 등록하기 위하여 Configuration 탭을 선택한 후, 생성 버튼을 누릅니다.

![pro_002.PNG](https://static.toastoven.net/prod_easycache/19.08.02/profile_001.PNG)

    * 프로파일명: 프로파일 이름을 입력합니다.
    * 설명: 프로파일의 설명을 입력합니다.
* 항목 값을 입력하고 OK 버튼을 누릅니다.
* 등록한 프로파일 정보를 수정합니다.
    * 이용중인 노드에도 반영됩니다.
* 등록한 프로파일을 삭제합니다.
    * 이용중인 노드가 있는 프로파일은 삭제할 수 없습니다.
* 기본 설정 정보가 있는 Default 프로파일을 제공합니다. 
* Default 프로파일은 수정, 삭제할 수 없습니다.
* 프로파일의 상태를 확인할 수 있습니다.
    * 정상
        * 프로파일을 수정, 삭제할 수 있습니다.
    * 변경 적용중
        * 프로파일을 변경하였고, 변경 내용을 각 노드에 전파 중인 상태입니다.
        * 변경 내용의 전파가 끝나면 상태는 정상으로 변경됩니다.
        * 변경 중 상태에서는 복제 그룹을 작성, 수정, 삭제할 수 없습니다.
    * 이용 중
        * 프로파일을 이용하여 작성, 변경 중인 복제 그룹이 있는 상태입니다.
        * 복제 그룹의 작성, 완료 후 상태는 정상으로 변경됩니다.
        * 프로파일이 이용중인 상태에서는 프로파일을 작성, 수정할 수 없습니다.
* 프로파일 상세
![profile_detail_001.PNG](https://static.toastoven.net/prod_easycache/19.08.02/profile_detail_001.PNG)
    * 프로파일의 상세 정보를 확인할 수 있습니다.
    * 항목 이름
    * 입력 범위: 항목의 입력 범위
    * 입력 값: 실제 설정된 값
    * 설명: 항목에 대한 설명
* 프로파일 항목
    * hash-max-ziplist-entries
    * hash-max-ziplist-value	
    * latency-monitor-threshold
    * list-compress-depth	
    * list-max-ziplist-size	
    * maxmemory-policy	
    * maxmemory-samples	
    * set-max-intset-entries	
    * slowlog-log-slower-than	
    * slowlog-max-len		
    * tcp-keepalive	
    * timeout	
    * zset-max-ziplist-entries
    * zset-max-ziplist-value
