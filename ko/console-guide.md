## Database > EasyCache > 콘솔 사용 가이드

## 시작하기

* 복제 그룹을 생성합니다.
* **Console > Database > EasyCache**의 **복제 그룹**탭에서 **생성** 버튼을 누르면 복제 그룹 생성 창이 나타납니다.

![rep_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/rep_create_001.PNG)

* 설정 창에서 표시된 필수 항목을 모두 입력하고 하단의 생성 버튼을 눌러주세요.
    * 복제그룹 이름: 복제 그룹 이름을 입력합니다.
    * 설명: 복제 그룹의 설명을 입력합니다.
    * 서비스 포트: Redis의 Port 번호를 입력합니다.
        * 10000 ~ 12000 사이로 설정할 수 있습니다.
    * 버젼: 생성하고자 하는 Redis 버젼을 선택합니다.
        * 현재 3.2.12만 지원합니다.
    * 인스턴스 타입: 복제 그룹의 사양을 선택합니다.
    * 가용성 영역: 복제 그룹이 생성될 영역을 선택합니다.  
    * 설정 프로파일: Redis의 설정 파일을 선택합니다.
        * Default 프로파일를 제공합니다.
        * 설정 프로파일을 추가하여 선택할 수 있습니다.
    * VPC Subnet : 생성할 복제 그룹과 private network 통신을 원하는 Compute & Network 상품의 subnet 을 선택합니다.
    * 입력하고 **생성** 버튼을 누릅니다.
    * 확인 화면에서 입력한 내용을 확인합니다.  
    * 최종적으로 **생성** 버튼을 누릅니다.
    * 복제 그룹이 생성되면서 Master 노드가 생성됩니다. 
    * 생성되기 까지 수분이 소요 됩니다.

### 복제그룹 접속

* 생성된 복제 그룹을 선택하고 **접속 정보**탭을 누릅니다.

![rep_de_002.PNG](https://static.toastoven.net/prod_easycache/19.07.01/rep_connection_001.PNG)

* 암호화된 패스워드를 **보기** 버튼을 누르면 확인할 수 있습니다.
* **복사**버튼을 누르면 패스워드를 복사할 수 있습니다.
* 접속 정보는 같은 VPC Subnet로 연결된 인스턴스의 애플리케이션에서 사용할 수 있습니다.
* 커맨드는 같은 VPC Subnet로 연결된 인스턴스에서 실행 가능합니다.
* 접속 제어 정보: 복제 그룹에 접근 가능한 사용자를 CIDR 형식으로 입력합니다.
    * **내 IP 표시** : 로컬 IP가 CIDR 형식으로 표시됩니다.
    * **생성** 버튼 누르면 등록됩니다.
    * 접속 제어 정보에 등록되지 않은 IP 는 접속이 불가능합니다.


## 복제 그룹

### 복제

* 가용성을 높이기 위해서 Redis가 지원하는 Replica 노드를 만들 수 있습니다.
* Replica 노드를 만들기 위해서 원본 복제 그룹을 선택한 후 **노드 추가** 버튼을 누릅니다.

![nod_ad_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/node_add_001.PNG)

* Replica 노드가 생성될 가용성 영역을 선택합니다. 원본 Master 노드와 다른 가용성 영역을 선택하면 가용성이 좋습니다. 
* Master 노드의 정보를 확인할 수 있습니다.
* OK 버튼을 누르면, Replica 노드가 생성됩니다.
* 노드정보는 그룹 상세에서 확인할 수 있습니다.
* 생성하면서 자동으로 복제 관계가 됩니다.
* 원본 Master 노드와 동일한 사양입니다.
* 원본 Master 노드의 크기에 비례하여 Replica 노드 생성 시간이 늘어 날 수 있습니다.

##### 제약 사항
* 원본 Master 노드는 1개의 Replica 노드만 만들 수 있습니다.
* Replica 노드의 Replica 노드를 만들 수 없습니다.

### 복제 그룹 상세
![rep_detail_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/rep_detail_001.PNG)
* 복제 그룹의 상세 정보를 확인 할 수 있습니다.
    * 기본 정보
    * 접속 정보
    * 노드 정보
    * 모니터링
   
* 생성된 복제 그룹의 갯수를 확인 할 수 있습니다. 
* 복제 그룹의 일람을 최신 정보로 새로 고침을 할 수 있습니다.

### 마스터 승격

* Replica 에서 Master 로 변경하는 것을 승격이라고 합니다.
* Master 노드로 승격시킬 Replica 노드를 선택하고 **마스터 승격** 버튼을 누릅니다.

![nod_ra_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/node_master_001.PNG)

* 내용을 확인하고 **OK**버튼 누릅니다.
* 원본 Master 노드는 Replica 노드로 변경되고 Replica 노드는 Master 노드로 변경되어 복제 관계를 자동으로 유지합니다.
##### 원본 Master 노드에 장애가 있을 경우
* 원본 Master 노드에 장애가 있을 경우에는 상태 정보가 disable로 표시됩니다.
* 원본 Master 노드에 장애가 있을 경우에는 Replica 노드를 Master 노드로 승격시키면 독립적으로 동작하게 됩니다.
* Replica 노드를 Master 노드로 승격시키고 장애가 있는 원본 Master 노드는 삭제해야 합니다.
* 새롭게 복제할 때에는 장애가 있는 원본 Master 노드를 삭제하고 Replica 노드를 추가합니다. 

### 복제 그룹 수정
* 원본 복제 그룹을 선택하고 **수정** 버튼을 누릅니다.
    * 복제그룹 이름: 복제 그룹 이름을 변경할 수 있습니다.
    * 설명: 복제 그룹 설명을 변경할 수 있습니다.
    * 설정 프로파일: Redis 설정을 변경할 수 있습니다.

![rep_mo_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/rep_modify_001.PNG)

* 변경 내용을 확인하고 **변경** 버튼을 누릅니다.
* 한번 설정한 서비스 포트, Redis 버전, 인스턴스 타입, 가용성 영역은 변경할 수 없습니다.


### 모니터링

* EasyCache는 Redis 운영 및 사용에 필요한 모니터링 항목을 주기적으로 수집하고, 차트로 보여줍니다.
* 특정 복제 그룹의 모니터링 항목이 보고 싶을 경우, 복제 그룹 목록에서 특정 복제 그룹을 선택하고 Monitoring 탭을 선택합니다.

![mon_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/monitoring_001.PNG)

* 차트 종류는 평균값을 지원합니다.
* 1시간, 24시간 등의 버튼을 누를 때마다, 현재 시각을 기준으로 계산하여 갱신합니다.
    * 1시간 버튼은 1분마다 정보를 수집하여 차트로 보여집니다. 
    * 24시간 버튼은 1시간 정보를 수집하여 차트로 보여집니다. 
    * 1주일 버튼은 24시간 정보를 수집하여 차트로 보여집니다.
    * 1개월 버튼은 1주일 정보를 수집하여 차트로 보여줍니다.
* 모니터링 데이타 보존 기간은 1개월입니다.
* 모리터링 항목
    * 키
    * 출력바이트
    * 입력 바이트
    * 처리 명령어 수/초
    * CPU 사용률
    * 성공한 키 조회수
    * 실패한 키 조회수
    * 제거된 키
    * 만료된 키
    * get 명령 실행 평균 시간
    * get 명령 실행 시간
    * get 명령 실행 횟수
    * 사용된 메모리(rss)
    * 사용된 메모리
    * 메모리 사용률
    * pub/sub 패턴 채널 연결 수
    * pub/sub 채널 연결 수
    * 단편화율
    * 저장후 데이터 변경 수
    * set 명령 실행 시간
    * set 명령 실행 횟수
    * set 명령 실행 평균 시간
    * 블록된 클라이언트
    * 연결된 클라이언트
    * 성공율

## 이벤트

* EasyCache > **이벤트** 탭을 선택합니다.
* EasyCache는 복제 그룹에서 발생한 의미 있는 이벤트를 자동으로 남깁니다.
* 검색어 란에 단어를 입력하고 검색할 때 이벤트의 리소스 이름과 설명을 대상으로 검색한 결과를 표시합니다.

![eve_002.PNG](https://static.toastoven.net/prod_easycache/19.05.23/event_001.PNG)

* 시간, 날짜별로 검색할 수 있습니다.
* 이벤트 데이타 보존 기간은 1개월입니다.
* 이벤트 타입은 어떤 리소스에서 발생한 이벤트인지를 지칭합니다.
    * ALL: NODE와 REPLICATION_GROUP 관련된 이벤트입니다.
    * NODE: NODE에 관련된 이벤트입니다.
    * REPLICATION_GROUP: REPLICATION_GROUP에 관련된 이벤트입니다.
* 이벤트 항목
    * 복제 그룹 생성 
    * 복제 그룹 삭제 
    * 복제 그룹 수정 
    * 복제 그룹 재시작 
    * Replica 노드 추가 
    * Replica 노드 삭제 
    * Replica 노드 승격
    * 상태 정보 변경
    * 설정 프로파일 변경
* 이벤트 항목의 상태
    * 시작
    * 종료
    * 성공
    * 실패
    * 이용가능
    * 이용불가 

## 알람

* EasyCache는 원하는 리소스에서 발생하는 특정 이벤트에 대한 알림을 수신그룹에 전달할 수 있습니다.

![eve_001.PNG](https://static.toastoven.net/prod_easycache/19.05.23/noti_001.PNG)

* 원하는 알림을 설정하기 위하여 알림 탭을 선택한 후, 생성 버튼을 누릅니다.
* 원하는 알림의 이름을 입력하고, 알림 설정을 통해 설정하고자하는 타입을 선택합니다.
    * 설정 후 OK 버튼을 클릭합니다.
* 일시적으로 알림 기능을 On / Off 할 수 있습니다.

![not_re_001.PNG](https://static.toastoven.net/prod_easycache/19.05.23/noti_002.PNG)

* 알림을 받을 수신자를 설정합니다.
    * 메일과 전화번호를 설정할 수 있습니다
* 알림을 받을 이벤트를 설정합니다
    * 원하는 이벤트를 복수 선택하여 설정합니다.
* 알림을 받을 모니터의 임계값을 설정합니다
    *  모니터링 화면에서 확인할 수 있는 항목들 중에서 입력할 수 있습니다.
* 설정한 조건을 만족 시 수신 대상에 입력한 메일주소와 전화번호로 알림을 받을 수 있습니다.  

## 설정 프로파일

* EasyCache는 변경이 가능한 Redis의 설정을 프로파일 형태로 등록하여 관리할 수 있습니다.
* 변경이 가능한 Redis의 설정을 프로파일로 등록하기 위하여 Configuration 탭을 선택한 후, 생성 버튼을 누릅니다.

![pro_002.PNG](https://static.toastoven.net/prod_easycache/19.07.01/profile_001.PNG)

    * 프로파일명: 프로파일 이름을 입력합니다.
    * 설명: 프로파일의 설명을 입력합니다.
* 항목 값을 입력하고 OK 버튼을 누릅니다.
* 등록한 프로파일 정보를 수정합니다.
    * 이용중인 인스턴스에도 반영됩니다.
* 등록한 프로파일을 삭제합니다.
    * 이용중인 인스턴스가 있는 프로파일은 삭제할 수 없습니다.
* 기본 설정 정보가 있는 Default 프로파일을 제공합니다. 
* Default 프로파일은 수정, 삭제 할 수 없습니다.
* 프로파일의 상태를 확인 할 수 있습니다.
    * 정상
        * 프로파일을 수정, 삭제 할 수 있습니다.
    * 변경 적용중
        * 프로파일을 변경하였고, 변경 내용을 각 노드에 전파 중인 상태입니다.
        * 변경 내용의 전파가 끝나면 상태는 정상으로 변경됩니다.
        * 변경 중 상태에서는 복제 그룹을 작성, 수정, 삭제 할 수 없습니다.
    * 이용 중
        * 프로파일을 이용하여 작성, 변경 중인 복제 그룹이 있는 상태입니다.
        * 복제 그룹의 작성, 완료 후 상태는 정상으로 변경됩니다.
        * 프로파일이 이용 중 상태에서는 프로파일을 작성, 수정 할 수 없습니다.
* 프로파일 상세
![profile_detail_001.PNG](https://static.toastoven.net/prod_easycache/19.07.01/profile_detail_001.PNG)
    * 프로파일의 상세 정보를 확인 할 수 있습니다.
    * 항목 이름
    * 입력 범위: 항목의 입력 범위
    * 입력 값: 실제 설정된 값
    * 설명: 항목에 대한 설명
* 프로파일 항목
    * hash-max-ziplist-entries
    * hash-max-ziplist-value	
    * latency-monitor-threshold
    * list-compress-depth	
    * list-max-ziplist-size	
    * maxmemory-policy	
    * maxmemory-samples	
    * set-max-intset-entries	
    * slowlog-log-slower-than	
    * slowlog-max-len		
    * tcp-keepalive	
    * timeout	
    * zset-max-ziplist-entries
    * zset-max-ziplist-value
